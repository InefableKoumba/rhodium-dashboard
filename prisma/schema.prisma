// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = "file:./whatsapp.db"
}

model WhatsAppMessage {
    id           String   @id @default(uuid())
    messageId    String   @unique // WhatsApp's message ID
    from         String // Sender's phone number
    to           String // Recipient's phone number
    type         String // Message type (text, template, etc.)
    content      String // Message content
    templateName String? // Name of the template if it's a template message
    timestamp    DateTime @default(now())
    direction    String // incoming or outgoing
    status       String // sent, delivered, read, etc.
    metadata     String? // Additional metadata as JSON string

    @@index([from, to])
    @@index([timestamp])
}

model WhatsAppTemplate {
    id         String   @id @default(uuid())
    name       String   @unique
    language   String
    components String // JSON string of template components
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    @@index([name])
}
